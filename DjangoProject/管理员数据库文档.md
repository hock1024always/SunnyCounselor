# 管理员端数据库表设计

## **1. 咨询师表 (counselors)**

| 字段名         | 类型                | 约束                       | 说明       |
| -------------- | ------------------- | -------------------------- | ---------- |
| id             | INT                 | PRIMARY KEY AUTO_INCREMENT | 主键ID     |
| name           | VARCHAR(50)         | NOT NULL                   | 咨询师姓名 |
| username | VARCHAR(50) | NOT NULL | 系统用户昵称 |
| gender         | ENUM('男','女')     | NOT NULL                   | 性别       |
| phone          | VARCHAR(20)         | NOT NULL                   | 联系电话   |
| email | VARCHAR(100) | NULL | 邮箱地址 |
| organization   | VARCHAR(100)        |                            | 所属机构   |
| expertise_tags | JSON                |                            | 擅长标签   |
| status         | ENUM('启用','停用') | DEFAULT '启用'             | 状态   |

**支持的查询方式：**

- 咨询师姓名
- 电话号码
- 状态

以及其中多个字段的联合查找，如果不查找默认返回所有，以及有分页功能

## **2. 预约订单表 (appointments)**

| 字段名                | 类型                                              | 约束                       | 说明                 |
| --------------------- | ------------------------------------------------- | -------------------------- | -------------------- |
| id                    | INT                                               | PRIMARY KEY AUTO_INCREMENT | 主键ID               |
| order_no              | VARCHAR(20)                                       | UNIQUE NOT NULL            | 订单编号             |
| client_name           | VARCHAR(50)                                       | NOT NULL                   | 预约人员姓名         |
| client_gender         | ENUM('男','女')                                   | NOT NULL                   | 性别                 |
| client_age            | INT                                               |                            | 年龄                 |
| service_type          | ENUM('个体咨询','团体咨询','家庭咨询','危机干预') |                            | 服务类型             |
| counseling_keywords   | VARCHAR(200)                                      |                            | 咨询关键字           |
| appointment_date      | DATE                                              |                            | 预约日期             |
| time_slot(预约时间段) | VARCHAR(50)                                       |                            | 预约时段             |
| submit_time           | DATETIME                                          |                            | 提交时间（创建时间） |
| end_time              | DATETIME                                          |                            | 结束时间             |
| status                | ENUM('未开始','进行中','已结束')                  | DEFAULT '未开始'           | 状态                 |
| counselor_id          | INT                                               |                            | 关联咨询师ID         |

**支持的查询方式：**

- 预约人员
- 起始日期（范围查找）
- 服务类型
- 咨询状态

以及其中多个字段的联合查找，如果不查找默认返回所有，以及有分页功能

## **3. 轮播图模块表 (banner_modules)**

| 字段名         | 类型        | 约束                       | 说明                                       |
| -------------- | ----------- | -------------------------- | ------------------------------------------ |
| id             | INT         | PRIMARY KEY AUTO_INCREMENT | 主键ID                                     |
| module_name    | VARCHAR(50) | NOT NULL                   | 模块名称                                   |
| carousel_count | INT         | DEFAULT 0                  | 轮播数量                                   |
| created_by     | VARCHAR(50) |                            | 创建人                                     |
| created_time   | DATETIME    | DEFAULT CURRENT_TIMESTAMP  | 创建时间                                   |
| pictures       | JSON        |                            | 轮播图片URL数组 `["url1", "url2", "url3"]` |

**支持的查询方式：**

- 模块

如果不查找默认返回所有，以及有分页功能

## **4. 通知表 (notifications)**

| 字段名                       | 类型         | 约束                       | 说明     |
| ---------------------------- | ------------ | -------------------------- | -------- |
| id                           | INT          | PRIMARY KEY AUTO_INCREMENT | 主键ID   |
| title                        | VARCHAR(200) | NOT NULL                   | 通知标题 |
| content                      | TEXT         |                            | 通知内容 |
| is_published                 | BOOLEAN      | DEFAULT FALSE              | 发布状态 |
| created_by                   | VARCHAR(50)  |                            | 创建人   |
| created_time（年月日时分秒） | DATETIME     | DEFAULT CURRENT_TIMESTAMP  | 创建时间 |

**支持的查询方式：**

- 通知标题

如果不查找默认返回所有，以及有分页功能

## **5. 宣教栏目表 (categories)**

| 字段名        | 类型        | 约束                       | 说明     |
| ------------- | ----------- | -------------------------- | -------- |
| id            | INT         | PRIMARY KEY AUTO_INCREMENT | 主键ID   |
| category_name | VARCHAR(50) | NOT NULL                   | 栏目名称 |
| sort_order    | INT         | DEFAULT 0                  | 栏目顺序 |
| created_by    | VARCHAR(50) |                            | 创建人   |
| created_time  | DATETIME    | DEFAULT CURRENT_TIMESTAMP  | 创建时间 |

**外键关系：**

- `articles.category_id` → `categories.id`

**支持的查询方式：**

- 栏目名称

如果不查找默认返回所有，以及有分页功能

## **6. 宣教资讯表 (articles)**

| 字段名                       | 类型         | 约束                       | 说明     |
| ---------------------------- | ------------ | -------------------------- | -------- |
| id                           | INT          | PRIMARY KEY AUTO_INCREMENT | 主键ID   |
| category_id                  | INT          | NOT NULL                   | 栏目ID   |
| title                        | VARCHAR(200) | NOT NULL                   | 资讯标题 |
| content                      | TEXT         |                            | 资讯内容 |
| collect_count                | INT          | DEFAULT 0                  | 收藏人数 |
| like_count                   | INT          | DEFAULT 0                  | 点赞人数 |
| read_count                   | INT          | DEFAULT 0                  | 阅读人数 |
| created_by                   | VARCHAR(50)  |                            | 创建人   |
| created_time（年月日时分秒） | DATETIME     | DEFAULT CURRENT_TIMESTAMP  | 创建时间 |
| video                        | VARCHAR(500) |                            | 视频URL  |

**支持的查询方式：**

- 咨询名称

如果不查找默认返回所有，以及有分页功能

## **7. 转介单位表 (referral_units)**

| 字段名        | 类型         | 约束                       | 说明     |
| ------------- | ------------ | -------------------------- | -------- |
| id            | INT          | PRIMARY KEY AUTO_INCREMENT | 主键ID   |
| unit_name     | VARCHAR(100) | NOT NULL                   | 单位名称 |
| address       | VARCHAR(200) |                            | 地址     |
| contact_phone | VARCHAR(20)  |                            | 联系电话 |
| created_by    | VARCHAR(50)  |                            | 创建人   |
| created_time  | DATETIME     | DEFAULT CURRENT_TIMESTAMP  | 创建时间 |

**支持的查询方式：**

- 单位名称

如果不查找默认返回所有，以及有分页功能

## **8. 学生转介表 (student_referrals)**

| 字段名           | 类型            | 约束                       | 说明       |
| ---------------- | --------------- | -------------------------- | ---------- |
| id               | INT             | PRIMARY KEY AUTO_INCREMENT | 主键ID     |
| student_name     | VARCHAR(50)     | NOT NULL                   | 学生姓名   |
| gender           | ENUM('男','女') | NOT NULL                   | 性别       |
| school           | VARCHAR(100)    |                            | 学校       |
| grade            | VARCHAR(20)     |                            | 年级       |
| class_name       | VARCHAR(20)     |                            | 班级       |
| referral_unit_id | INT             |                            | 转介单位ID |
| referral_reason  | TEXT            |                            | 转介原因   |
| referral_date    | DATE            |                            | 转介时间   |
| created_by       | VARCHAR(50)     |                            | 创建人     |
| created_time     | DATETIME        | DEFAULT CURRENT_TIMESTAMP  | 创建时间   |

**外键关系：**

- `student_referrals.referral_unit_id` → `referral_units.id`

**支持的查询方式：**

- 学生姓名

如果不查找默认返回所有，以及有分页功能

## **9. 负面事件表 (negative_events)**

| 字段名           | 类型         | 约束                       | 说明                |
|---------------| ------------ | -------------------------- |-------------------|
| id            | INT          | PRIMARY KEY AUTO_INCREMENT | 主键ID              |
| student_name  | VARCHAR(50)  | NOT NULL                   | 学生姓名              |
| organization  | VARCHAR(100) |                            | 机构名称              |
| grade         | VARCHAR(20)  |                            | 年级                |
| class_name    | VARCHAR(20)  |                            | 班级                |
| event_details | TEXT         |                            | 事件详情              |
| event_date    | DATE         |                            | 事件日期              |
| created_by    | VARCHAR(50)  |                            | 创建人               |
| disabled      | BOOLEAN      | DEFAULT FALSE              | 是否禁用（true的在前端不显示） | 
| created_time  | DATETIME     | DEFAULT CURRENT_TIMESTAMP  | 创建时间              |

**支持的查询方式：**

- 学生姓名
- 起始日期

以及其中多个字段的联合查找，如果不查找默认返回所有，以及有分页功能

## **10. 访谈评估表 (interview_assessments)**

| 字段名            | 类型                             | 约束                       | 说明     |
| ----------------- | -------------------------------- | -------------------------- | -------- |
| id                | INT                              | PRIMARY KEY AUTO_INCREMENT | 主键ID   |
| organization      | VARCHAR(100)                     |                            | 所属机构 |
| grade             | VARCHAR(20)                      |                            | 年级     |
| class_name        | VARCHAR(20)                      |                            | 班级     |
| student_name      | VARCHAR(50)                      | NOT NULL                   | 姓名     |
| interview_count   | INT                              | DEFAULT 1                  | 访谈次数 |
| interview_status  | ENUM('待处理','进行中','已完成') | DEFAULT '待处理'           | 访谈状态 |
| interview_type    | VARCHAR(50)                      |                            | 类型     |
| doctor_assessment | VARCHAR(50)                      |                            | 医生评定 |
| follow_up_plan    | VARCHAR(50)                      |                            | 后续计划 |
| created_time      | DATETIME                         | DEFAULT CURRENT_TIMESTAMP  | 添加时间 |

**支持的查询方式：**

- 机构
- 年级
- 班级
- 姓名
- 访谈次数
- 访谈状态
- 类型
- 医生评定
- 后续计划

以及其中多个字段的联合查找，如果不查找默认返回所有，以及有分页功能

## 11. admin_user (管理员信息表)

| 字段名   | 类型         |  默认值         | 参数说明     |
| -------- | ------------ |  -------------- | ------------ |
| id       | BIGINT       |   AUTO_INCREMENT | 用户唯一ID   |
| username | VARCHAR(50)  |    -              | 用户名，唯一 |
| gender | ENUM('男','女') | NOT NULL | 性别 |
| email    | VARCHAR(100) |    NULL           | 邮箱地址     |
| phone    | VARCHAR(20)  |      NULL           | 手机号       |
| password | VARCHAR(128) |     -              | 加密密码     |

## **12. 排班表 (schedules)**

| 字段名       | 类型        | 约束                       | 说明     |
| ------------ | ----------- | -------------------------- | -------- |
| id           | INT         | PRIMARY KEY AUTO_INCREMENT | 主键ID   |
| counselor_id | INT         | NOT NULL                   | 咨询师ID |
| work_date    | DATE        | NOT NULL                   | 工作日期 |
| start_time   | TIME        | NOT NULL                   | 开始时间 |
| end_time     | TIME        | NOT NULL                   | 结束时间 |
| created_by   | VARCHAR(50) |                            | 创建人   |
| created_time | DATETIME    | DEFAULT CURRENT_TIMESTAMP  | 创建时间 |

**外键关系：**
- `schedules.counselor_id` → `counselors.id`

## **13. 停诊表 (cancellations)**

| 字段名       | 类型        | 约束                       | 说明         |
| ------------ | ----------- | -------------------------- | ------------ |
| id           | INT         | PRIMARY KEY AUTO_INCREMENT | 主键ID       |
| counselor_id | INT         | NOT NULL                   | 咨询师ID     |
| cancel_start | DATETIME    | NOT NULL                   | 停诊开始时间 |
| cancel_end   | DATETIME    | NOT NULL                   | 停诊结束时间 |
| created_by   | VARCHAR(50) |                            | 创建人       |
| created_time | DATETIME    | DEFAULT CURRENT_TIMESTAMP  | 创建时间     |

**外键关系：**
- `cancellations.counselor_id` → `counselors.id`